{% extends "sdv/base_v.html" %}

{% load static from staticfiles %}

{% block linkscript %}
<script type="text/javascript" charset="UTF-8" src="{%static '/js/his_data_v.js'%}"></script>
{% endblock linkscript %}

{% block breadcrumb%}
	
	<li>
		 <a href="#">可视化管理</a>
	</li>
	<li class="active">
		历史行情数据可视化
	</li>
{% endblock breadcrumb %}

{% block searchForm%}
	<form class="form-inline" role="form" style="text-align: center" action="/his_v/" method="post">
		{%csrf_token%}

		<div class="form-group">
			<label class="sr-only" for="id">ID</label>
			<input type="text" class="form-control" id="id"
		   placeholder="{{searchTip}}" name="searchid">
		</div>

		<button id="hdata" type="button" class="btn btn-default"  >确定</button>
        </form>
{% endblock searchForm%}

{%block chart%}
	<div id="main" style="width: 100%;height:500px;" class="col-md-12 column">
       <!--<script type="text/javascript">-->
		   <!---->
	   <!--// function calculateMA(dayCount, data) {-->
		<!--// 	var result = [];-->
		<!--// 	for (var i = 0, len = data.length; i < len; i++) {-->
		<!--// 		if (i < dayCount) {-->
		<!--// 			result.push('-');-->
		<!--// 			continue;-->
		<!--// 		}-->
		<!--// 		var sum = 0;-->
		<!--// 		for (var j = 0; j < dayCount; j++) {-->
		<!--// 			sum += data[i - j][1];-->
		<!--// 		}-->
		<!--// 		result.push((sum / dayCount).toFixed(2));-->
		<!--// 	}-->
		<!--// 	return result;-->
		<!--// }-->
	   <!--/*基于准备好的dom，初始化echarts实例*/-->
        <!--var myChart = echarts.init(document.getElementById('main'));-->

		<!--var colorList = ['#c23531','#2f4554', '#61a0a8', '#d48265', '#91c7ae','#749f83',  '#ca8622', '#bda29a','#6e7074', '#546570', '#c4ccd3'];-->
		<!--var labelFont = 'bold 12px Sans-serif';-->
		<!--var dates = {{showData.date|safe}}-->
		<!--var data = {{showData.data|safe}}-->
		<!--var volumes = {{showData.volume|safe}}-->
		<!--var chartTitle ='{{showData.chartTitle|safe}}'-->


		<!--// var dataMA5 = calculateMA(5, data);-->
		<!--// var dataMA10 = calculateMA(10, data);-->
		<!--// var dataMA20 = calculateMA(20, data);-->
		<!--var dataMA5 = {{showData.MA_5|safe}}-->
		<!--var dataMA10 = {{showData.MA_10|safe}}-->
		<!--var dataMA20 = {{showData.MA_20|safe}}-->

		<!--option = {-->
			<!--animation: false,-->
			<!--color: colorList,-->
			<!--title: {-->
				<!--left: 'center',-->
				<!--text: chartTitle,-->
			<!--},-->
			<!--legend: {-->
				<!--top: 30,-->
				<!--data: ['日K', 'MA5', 'MA10', 'MA20']-->
			<!--},-->
			<!--tooltip: {-->
				<!--triggerOn: 'none',-->
				<!--transitionDuration: 0,-->
				<!--confine: true,-->
				<!--bordeRadius: 4,-->
				<!--borderWidth: 1,-->
				<!--borderColor: '#333',-->
				<!--backgroundColor: 'rgba(255,255,255,0.9)',-->
				<!--textStyle: {-->
					<!--fontSize: 12,-->
					<!--color: '#333'-->
				<!--},-->
				<!--position: function (pos, params, el, elRect, size) {-->
					<!--var obj = {-->
						<!--top: 60-->
					<!--};-->
					<!--obj[['left', 'right'][+(pos[0] < size.viewSize[0] / 2)]] = 5;-->
					<!--return obj;-->
				<!--}-->
			<!--},-->
			<!--axisPointer: {-->
				<!--link: [{-->
					<!--xAxisIndex: [0, 1]-->
				<!--}]-->
			<!--},-->
			<!--dataZoom: [{-->
				<!--type: 'slider',-->
				<!--xAxisIndex: [0, 1],-->
				<!--realtime: false,-->
				<!--start: 20,-->
				<!--end: 70,-->
				<!--top: 65,-->
				<!--height: 20,-->
				<!--handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',-->
				<!--handleSize: '120%'-->
			<!--}, {-->
				<!--type: 'inside',-->
				<!--xAxisIndex: [0, 1],-->
				<!--start: 40,-->
				<!--end: 70,-->
				<!--top: 30,-->
				<!--height: 20-->
			<!--}],-->
			<!--xAxis: [{-->
				<!--type: 'category',-->
				<!--data: dates,-->
				<!--boundaryGap : false,-->
				<!--axisLine: { lineStyle: { color: '#777' } },-->
				<!--axisLabel: {-->
					<!--formatter: function (value) {-->
						<!--return echarts.format.formatTime('yyyy-MM-dd', value);-->
					<!--}-->
				<!--},-->
				<!--min: 'dataMin',-->
				<!--max: 'dataMax',-->
				<!--axisPointer: {-->
					<!--show: true-->
				<!--}-->
			<!--}, {-->
				<!--type: 'category',-->
				<!--gridIndex: 1,-->
				<!--data: dates,-->
				<!--scale: true,-->
				<!--boundaryGap : false,-->
				<!--splitLine: {show: false},-->
				<!--axisLabel: {show: false},-->
				<!--axisTick: {show: false},-->
				<!--axisLine: { lineStyle: { color: '#777' } },-->
				<!--splitNumber: 20,-->
				<!--min: 'dataMin',-->
				<!--max: 'dataMax',-->
				<!--axisPointer: {-->
					<!--type: 'shadow',-->
					<!--label: {show: false},-->
					<!--triggerTooltip: true,-->
					<!--handle: {-->
						<!--show: true,-->
						<!--margin: 30,-->
						<!--color: '#B80C00'-->
					<!--}-->
				<!--}-->
			<!--}],-->
			<!--yAxis: [{-->
				<!--scale: true,-->
				<!--splitNumber: 2,-->
				<!--axisLine: { lineStyle: { color: '#777' } },-->
				<!--splitLine: { show: true },-->
				<!--axisTick: { show: false },-->
				<!--axisLabel: {-->
					<!--inside: true,-->
					<!--formatter: '{value}\n'-->
				<!--}-->
			<!--}, {-->
				<!--scale: true,-->
				<!--gridIndex: 1,-->
				<!--splitNumber: 2,-->
				<!--axisLabel: {show: false},-->
				<!--axisLine: {show: false},-->
				<!--axisTick: {show: false},-->
				<!--splitLine: {show: false}-->
			<!--}],-->
			<!--grid: [{-->
				<!--left: 20,-->
				<!--right: 20,-->
				<!--top: 110,-->
				<!--height: 200-->
			<!--}, {-->
				<!--left: 20,-->
				<!--right: 20,-->
				<!--height: 90,-->
				<!--top: 330-->
			<!--}],-->
			<!--graphic: [{-->
				<!--type: 'group',-->
				<!--left: 'center',-->
				<!--top: 70,-->
				<!--width: 300,-->
				<!--bounding: 'raw',-->
				<!--children: [{-->
					<!--id: 'MA5',-->
					<!--type: 'text',-->
					<!--style: {fill: colorList[1], font: labelFont},-->
					<!--left: 0-->
				<!--}, {-->
					<!--id: 'MA10',-->
					<!--type: 'text',-->
					<!--style: {fill: colorList[2], font: labelFont},-->
					<!--left: 'center'-->
				<!--}, {-->
					<!--id: 'MA20',-->
					<!--type: 'text',-->
					<!--style: {fill: colorList[3], font: labelFont},-->
					<!--right: 0-->
				<!--}]-->
			<!--}],-->
			<!--series: [{-->
				<!--name: 'Volume',-->
				<!--type: 'bar',-->
				<!--xAxisIndex: 1,-->
				<!--yAxisIndex: 1,-->
				<!--itemStyle: {-->
					<!--normal: {-->
						<!--color: '#7fbe9e'-->
					<!--},-->
					<!--emphasis: {-->
						<!--color: '#140'-->
					<!--}-->
				<!--},-->
				<!--data: volumes-->
			<!--}, {-->
				<!--type: 'candlestick',-->
				<!--name: '日K',-->
				<!--data: data,-->
				<!--itemStyle: {-->
					<!--normal: {-->
						<!--color: '#ef232a',-->
						<!--color0: '#14b143',-->
						<!--borderColor: '#ef232a',-->
						<!--borderColor0: '#14b143'-->
					<!--},-->
					<!--emphasis: {-->
						<!--color: 'black',-->
						<!--color0: '#444',-->
						<!--borderColor: 'black',-->
						<!--borderColor0: '#444'-->
					<!--}-->
				<!--}-->
			<!--}, {-->
				<!--name: 'MA5',-->
				<!--type: 'line',-->
				<!--data: dataMA5,-->
				<!--smooth: true,-->
				<!--showSymbol: false,-->
				<!--lineStyle: {-->
					<!--normal: {-->
						<!--width: 1-->
					<!--}-->
				<!--}-->
			<!--}, {-->
				<!--name: 'MA10',-->
				<!--type: 'line',-->
				<!--data: dataMA10,-->
				<!--smooth: true,-->
				<!--showSymbol: false,-->
				<!--lineStyle: {-->
					<!--normal: {-->
						<!--width: 1-->
					<!--}-->
				<!--}-->
			<!--}, {-->
				<!--name: 'MA20',-->
				<!--type: 'line',-->
				<!--data: dataMA20,-->
				<!--smooth: true,-->
				<!--showSymbol: false,-->
				<!--lineStyle: {-->
					<!--normal: {-->
						<!--width: 1-->
					<!--}-->
				<!--}-->
			<!--}]-->
		<!--};-->

		<!--// 使用刚指定的配置项和数据显示图表-->
        <!--myChart.setOption(option);-->

	   <!--</script>-->
		<!--K线图——————2-->
		<!--<script type="text/javascript">-->

            <!--var msg = '{{msg|safe}}'-->
            <!--alert(msg)-->

            <!--if(msg == " 'error' "){-->
                 <!--alert("没有找到对应数据！")-->

            <!--}-->
            <!--else{-->
                  <!--/*基于准备好的dom，初始化echarts实例*/-->
        <!--var myChart = echarts.init(document.getElementById('main'));-->


        <!--var dates = {{showData.date|safe}}-->
		<!--var data = {{showData.data|safe}}-->
		<!--var volumes = {{showData.volume|safe}}-->
		<!--var chartTitle ='{{showData.chartTitle|safe}}'-->



		<!--var dataMA5 = {{showData.MA_5|safe}}-->
		<!--var dataMA10 = {{showData.MA_10|safe}}-->
		<!--var dataMA20 = {{showData.MA_20|safe}}-->



        <!--option = {-->
            <!--title: {    //标题-->
                <!--text: chartTitle,-->
                <!--left: 'center',-->
            <!--},-->
            <!--tooltip: {  //提示框-->
                <!--trigger: 'axis',    //触发类型：坐标轴触发-->
                <!--axisPointer: {  //坐标轴指示器配置项-->
                    <!--type: 'cross'   //指示器类型，十字准星-->
                <!--}-->
            <!--},-->
            <!--legend: {   //图例控件，点击图例控制哪些系列不现实-->
            	<!--top: 30,-->
                <!--data: ['日K', 'MA5', 'MA10', 'MA20']-->
            <!--},-->
            <!--grid: {     //直角坐标系-->
                <!--show:true,-->
				<!--top:100,-->
                <!--left: '10%',    //grid组件离容器左侧的距离-->
                <!--right: '10%',-->
                <!--bottom: '15%',-->
                <!--//backgroundColor:'#ccc'-->
            <!--},-->
            <!--xAxis: {-->
                <!--type: 'category',   //坐标轴类型，类目轴-->
                <!--data: dates,-->
                <!--//scale: true,  //只在数字轴中有效-->
                <!--boundaryGap : false,    //刻度作为分割线，标签和数据点会在两个刻度上-->
                <!--axisLine: {onZero: false},-->
                <!--splitLine: {show: false},   //是否显示坐标轴轴线-->
                <!--//splitNumber: 20,    //坐标轴的分割段数，预估值，在类目轴中无效-->
                <!--min: 'dataMin', //特殊值，数轴上的最小值作为最小刻度-->
                <!--max: 'dataMax'  //特殊值，数轴上的最大值作为最大刻度-->
            <!--},-->
            <!--yAxis: {-->
                <!--scale: true,    //坐标刻度不强制包含零刻度-->
				<!--axisLabel: {-->
            		<!--formatter: '￥{value} '-->
				<!--},-->
                <!--splitArea: {-->
                    <!--show: true  //显示分割区域-->
                <!--}-->
            <!--},-->
            <!--// dataZoom: [     //用于区域缩放-->
            <!--//     {-->
            <!--//         filterMode:'filter',    //当前数据窗口外的数据被过滤掉来达到数据窗口缩放的效果  默认值filter-->
            <!--//         type: 'inside', //内置型数据区域缩放组件-->
            <!--//         start: 50,      //数据窗口范围的起始百分比-->
            <!--//         end: 100        //数据窗口范围的结束百分比-->
            <!--//     },-->
            <!--//     {-->
            <!--//         show: true,-->
            <!--//         type: 'slider', //滑动条型数据区域缩放组件-->
            <!--//         y: '90%',-->
            <!--//         start: 50,-->
            <!--//         end: 100-->
            <!--//     }-->
            <!--// ],-->
			<!--dataZoom: [{-->
					<!--type: 'slider',-->
					<!--realtime: false,-->
					<!--start: 20,-->
					<!--end: 70,-->
					<!--top: 65,-->
					<!--height: 20,-->
					<!--handleIcon: 'M10.7,11.9H9.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z',-->
					<!--handleSize: '120%'-->
				<!--}, {-->
					<!--type: 'inside',-->

					<!--start: 40,-->
					<!--end: 70,-->
					<!--top: 30,-->
					<!--height: 20-->
				<!--}],-->
            <!--series: [   //图表类型-->
                <!--{-->
                    <!--name: '日K',-->
                    <!--type: 'candlestick',    //K线图-->
                    <!--data: data,     //y轴对应的数据-->

        <!--////////////////////////图标标注/////////////////////////////-->

                    <!--markPoint: {    //图表标注-->
                        <!--label: {    //标注的文本-->
                            <!--normal: {   //默认不显示标注-->
                                <!--show:true,-->
                                <!--//position:['20%','30%'],-->
                                <!--formatter: function (param) {   //标签内容控制器-->
                                    <!--return param != null ? Math.round(param.value) : '';-->
                                <!--}-->
                            <!--}-->
                        <!--},-->
                        <!--data: [     //标注的数据数组-->
                            <!--{-->
                                <!--name: 'XX标点',-->
                                <!--coord: ['2013/5/31', 2300], //指定数据的坐标位置-->
                                <!--value: 2300,-->
                                <!--itemStyle: {    //图形样式-->
                                    <!--normal: {color: 'rgb(41,60,85)'}-->
                                <!--}-->
                            <!--},-->
                            <!--{-->
                                <!--name: 'highest value',-->
                                <!--type: 'max',    //最大值-->
                                <!--valueDim: 'highest'     //在highest维度上的最大值 最高价-->
                            <!--},-->
                            <!--{-->
                                <!--name: 'lowest value',-->
                                <!--type: 'min',-->
                                <!--valueDim: 'lowest'  //最低价-->
                            <!--},-->
                            <!--{-->
                                <!--name: 'average value on close',-->
                                <!--type: 'average',-->
                                <!--valueDim: 'close'   //收盘价-->
                            <!--}-->
                        <!--],-->
                        <!--tooltip: {      //提示框-->
                            <!--formatter: function (param) {-->
                                <!--return param.name + '<br>' + (param.data.coord || '');-->
                            <!--}-->
                        <!--}-->
                    <!--},-->

<!--/////////////////////////////////图标标线///////////////////////////-->

                    <!--markLine: {-->
                        <!--symbol: ['none', 'none'],   //标线两端的标记类型-->
                        <!--data: [-->
                            <!--[-->
                                <!--{-->
                                    <!--name: 'from lowest to highest',-->
                                    <!--type: 'min',    //设置该标线为最小值的线-->
                                    <!--valueDim: 'lowest', //指定在哪个维度上的最小值-->
                                    <!--symbol: 'circle',-->
                                    <!--symbolSize: 10, //起点标记的大小-->
                                    <!--label: {    //normal默认，emphasis高亮-->
                                        <!--normal: {show: false},  //不显示标签-->
                                        <!--emphasis: {show: false} //不显示标签-->
                                    <!--}-->
                                <!--},-->
                                <!--{-->
                                    <!--type: 'max',-->
                                    <!--valueDim: 'highest',-->
                                    <!--symbol: 'circle',-->
                                    <!--symbolSize: 10,-->
                                    <!--label: {-->
                                        <!--normal: {show: false},-->
                                        <!--emphasis: {show: false}-->
                                    <!--}-->
                                <!--}-->
                            <!--],-->

                            <!--{-->
                                <!--name: 'min line on close',-->
                                <!--type: 'min',-->
                                <!--valueDim: 'close'-->
                            <!--},-->
                            <!--{-->
                                <!--name: 'max line on close',-->
                                <!--type: 'max',-->
                                <!--valueDim: 'close'-->
                            <!--}-->
                        <!--]-->

                    <!--}-->

                <!--},-->

                <!--{   //MA5 5天内的收盘价之和/5-->
                    <!--name: 'MA5',-->
                    <!--type: 'line',-->
                    <!--data: dataMA5,-->
                    <!--smooth: true,-->
                    <!--lineStyle: {-->
                        <!--normal: {opacity: 0.5}-->
                    <!--}-->
                <!--},-->
                <!--{-->
                    <!--name: 'MA10',-->
                    <!--type: 'line',-->
                    <!--data: dataMA10,-->
                    <!--smooth: true,-->
                    <!--lineStyle: {    //标线的样式-->
                        <!--normal: {opacity: 0.5}-->
                    <!--}-->
                <!--},-->
                <!--{-->
                    <!--name: 'MA20',-->
                    <!--type: 'line',-->
                    <!--data: dataMA20,-->
                    <!--smooth: true,-->
                    <!--lineStyle: {-->
                        <!--normal: {opacity: 0.5}-->
                    <!--}-->
                <!--},-->


            <!--]-->
        <!--};-->


        <!--// 使用刚指定的配置项和数据显示图表-->
        <!--myChart.setOption(option);-->

            <!--}-->


        <!--</script>-->






{%endblock chart%}